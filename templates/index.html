<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta property="og:title" content="Stock Tracker">
    <meta property="og:description" content="Descriptions">
    <meta property="og:type" content="website">
    <meta property="og:image" content="{{ url_for('static', path='/icon/thumbnail.png') }}">
    <title>Stock</title>
    <link rel="icon" href="{{ url_for('static', path='/icon/icon.png') }}">
    <link href="{{ url_for('static', path='styles.css') }}" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/dayjs/1.11.6/dayjs.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/dayjs/1.11.6/plugin/relativeTime.min.js"></script>
    <script>
        dayjs.extend(window.dayjs_plugin_relativeTime);
    </script>
</head>
<body>
<div class="news-text">
    <span class="gradient-text">Today`s News</span>
</div>
<!-- ì „ì²´ ì»¨í…Œì´ë„ˆ: í™”ë©´ ì¤‘ì•™ ì •ë ¬ -->
<div class="min-h-screen flex flex-col justify-center items-center">
    {% if news %}
        <div class="w-full flex flex-wrap justify-center gap-10">
            {% for article in news %}
                <div class="card">
                    <!-- ì¹´ë“œ ìƒë‹¨ ìš°ì¸¡ì— ìœ„ì¹˜í•˜ëŠ” ticker ìŠ¤ìœ„ì¹˜ì™€ íˆ´íŒ ì»¨í…Œì´ë„ˆ -->
                    <div class="ticker-container">
                        <input type="checkbox" id="ticker-switch-{{ loop.index }}" class="ticker-checkbox">
                        <label class="switch ticker-switch" for="ticker-switch-{{ loop.index }}">
                            <span class="slider"></span>
                        </label>
                        <div class="ticker-tooltip">
                            {% for ts in article.ticker_sentiment %}
                                <div>{{ ts.ticker }}</div>
                            {% endfor %}
                        </div>
                    </div>
                    <div class="content">
                        <p class="heading">
                            {{ article.title }}
                        </p>
                        <p class="para">
                            {{ article.summary }}
                        </p>
                        <!-- í•˜ë‹¨ ì˜ì—­: ë²„íŠ¼ ë° ì‹œê°„ ì •ë³´ -->
                        <div class="w-full flex justify-between items-center">
                            <div class="flex gap-2">
                                <button class="btn" onclick="window.open('{{ article.url }}', '_blank')">Read more
                                </button>
                            </div>
                            <span class="relative-time text-xs text-gray-400"
                                  data-published="{{ article.time_published }}"></span>
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>
    {% else %}
        <p>ğŸ“¢ ë‰´ìŠ¤ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.</p>
    {% endif %}
</div>

<hr>

<h3>ğŸš€ ìƒìŠ¹ ì¢…ëª©</h3>
<div class="container-gainers">
    <table border="1">
        <tr>
            <th>ì¢…ëª©</th>
            <th>ê°€ê²©</th>
            <th>ë³€ë™ë¥ </th>
        </tr>
        {% for stock in top20_gainers_losers[0].stocks %}
            <div class="stock">
                <div class="stock-title">
          <span>
            <svg width="20" fill="currentColor" height="20" viewBox="0 0 1792 1792">
              <!-- SVG ë‚´ìš© -->
            </svg>
          </span>
                    <p class="stock-title-text">
                        {{ stock.ticker }}
                    </p>
                    <p class="stock-percent">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1792 1792" fill="currentColor" height="20"
                             width="20">
                            <!-- SVG ë‚´ìš© -->
                        </svg>
                        {{ stock.change_percentage.replace('%', '') | float | int }}%
                    </p>
                </div>
                <div class="stock-data">
                    <p>
                        {{ price }}
                    </p>
                </div>
            </div>
        {% endfor %}
    </table>
</div>

<h3>ğŸ“‰ í•˜ë½ ì¢…ëª©</h3>
<div class="container-losers">
    <table border="1">
        <tr>
            <th>ì¢…ëª©</th>
            <th>ê°€ê²©</th>
            <th>ë³€ë™ë¥ </th>
        </tr>
        {% for stock in top20_gainers_losers[1].stocks %}
            <div class="stock">
                <div class="stock-title">
          <span>
            <svg width="20" fill="currentColor" height="20" viewBox="0 0 1792 1792">
              <!-- SVG ë‚´ìš© -->
            </svg>
          </span>
                    <p class="stock-title-text">
                        {{ stock.ticker }}
                    </p>
                    <p class="stock-percent">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1792 1792" fill="currentColor" height="20"
                             width="20">
                            <!-- SVG ë‚´ìš© -->
                        </svg>
                        {{ stock.change_percentage.replace('%', '') | float | int }}%
                    </p>
                </div>
                <div class="stock-data">
                    <p>
                        {{ price }}
                    </p>
                </div>
            </div>
        {% endfor %}
    </table>
</div>


<script src="{{ url_for('static', path='script.js') }}"></script>
</body>
</html>
