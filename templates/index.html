<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta property="og:title" content="Stock Tracker">
    <meta property="og:description" content="Descriptions">
    <meta property="og:type" content="website">
    <meta property="og:image" content="{{ url_for('static', path='/icon/thumbnail.png') }}">
    <title>Stock</title>
    <link rel="icon" href="{{ url_for('static', path='/icon/icon.png') }}">
    <link href="{{ url_for('static', path='styles.css') }}" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/dayjs/1.11.6/dayjs.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/dayjs/1.11.6/plugin/relativeTime.min.js"></script>
    <script>
        dayjs.extend(window.dayjs_plugin_relativeTime);
    </script>
</head>
<body>
<div class="news-text">
    <span class="gradient-text">Today`s News</span>
</div>
<!-- Ï†ÑÏ≤¥ Ïª®ÌÖåÏù¥ÎÑà: ÌôîÎ©¥ Ï§ëÏïô Ï†ïÎ†¨ -->
<div class="min-h-screen flex flex-col justify-center items-center">
    {% if news %}
        <div class="w-full flex flex-wrap justify-center gap-10">
            {% for article in news %}
                <div class="card">
                    <!-- Ïπ¥Îìú ÏÉÅÎã® Ïö∞Ï∏°Ïóê ÏúÑÏπòÌïòÎäî ticker Ïä§ÏúÑÏπòÏôÄ Ìà¥ÌåÅ Ïª®ÌÖåÏù¥ÎÑà -->
                    <div class="ticker-container">
                        <input type="checkbox" id="ticker-switch-{{ loop.index }}" class="ticker-checkbox">
                        <label class="switch ticker-switch" for="ticker-switch-{{ loop.index }}">
                            <span class="slider"></span>
                        </label>
                        <div class="ticker-tooltip">
                            {% for ts in article.ticker_sentiment %}
                                <div>{{ ts.ticker }}</div>
                            {% endfor %}
                        </div>
                    </div>
                    <div class="content">
                        <p class="heading">
                            {{ article.title }}
                        </p>
                        <p class="para">
                            {{ article.summary }}
                        </p>
                        <!-- ÌïòÎã® ÏòÅÏó≠: Î≤ÑÌäº Î∞è ÏãúÍ∞Ñ Ï†ïÎ≥¥ -->
                        <div class="w-full flex justify-between items-center">
                            <div class="flex gap-2">
                                <button class="btn" onclick="window.open('{{ article.url }}', '_blank')">Read more
                                </button>
                            </div>
                            <span class="relative-time text-xs text-gray-400"
                                  data-published="{{ article.time_published }}"></span>
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>
    {% else %}
        <p>üì¢ Îâ¥Ïä§ Îç∞Ïù¥ÌÑ∞Í∞Ä ÏóÜÏäµÎãàÎã§.</p>
    {% endif %}
</div>

<hr>

<div class="w-full flex flex-wrap justify-center gap-10">
    {% for stock in top20_gainers_losers[0].stocks %}
        <div class="stock">
            <div class="stock-title">
                  <span>
                    <svg width="20" fill="currentColor" height="20" viewBox="0 0 1792 1792">
                        <path d="M1362 1185q0 153-99.5 263.5t-258.5 136.5v175q0 14-9 23t-23 9h-135q-13 0-22.5-9.5t-9.5-22.5v-175q-66-9-127.5-31t-101.5-44.5-74-48-46.5-37.5-17.5-18q-17-21-2-41l103-135q7-10 23-12 15-2 24 9l2 2q113 99 243 125 37 8 74 8 81 0 142.5-43t61.5-122q0-28-15-53t-33.5-42-58.5-37.5-66-32-80-32.5q-39-16-61.5-25t-61.5-26.5-62.5-31-56.5-35.5-53.5-42.5-43.5-49-35.5-58-21-66.5-8.5-78q0-138 98-242t255-134v-180q0-13 9.5-22.5t22.5-9.5h135q14 0 23 9t9 23v176q57 6 110.5 23t87 33.5 63.5 37.5 39 29 15 14q17 18 5 38l-81 146q-8 15-23 16-14 3-27-7-3-3-14.5-12t-39-26.5-58.5-32-74.5-26-85.5-11.5q-95 0-155 43t-60 111q0 26 8.5 48t29.5 41.5 39.5 33 56 31 60.5 27 70 27.5q53 20 81 31.5t76 35 75.5 42.5 62 50 53 63.5 31.5 76.5 13 94z">
                        </path>
                    </svg>
                  </span>
                <p class="stock-title-text">
                    {{ stock.ticker }}
                </p>
                <p class="stock-percent">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1792 1792" fill="currentColor" height="20"
                         width="20">
                        <path d="M1408 1216q0 26-19 45t-45 19h-896q-26 0-45-19t-19-45 19-45l448-448q19-19 45-19t45 19l448 448q19 19 19 45z">
                        </path>
                    </svg>
                    {{ stock.change_percentage.replace('%', '') | float | int }}%
                </p>
            </div>
            <div class="stock-data">
                <p>
                    {{ price }}
                </p>
            </div>
        </div>
    {% endfor %}
</div>

<hr>
<div style="margin-top: 150px;"></div>

<div class="w-full flex flex-wrap justify-center gap-10">
    {% for stock in top20_gainers_losers[1].stocks %}
        <div class="stock">
            <div class="stock-title">
          <span>
            <svg width="20" fill="currentColor" height="20" viewBox="0 0 1792 1792">
                <path d="M1362 1185q0 153-99.5 263.5t-258.5 136.5v175q0 14-9 23t-23 9h-135q-13 0-22.5-9.5t-9.5-22.5v-175q-66-9-127.5-31t-101.5-44.5-74-48-46.5-37.5-17.5-18q-17-21-2-41l103-135q7-10 23-12 15-2 24 9l2 2q113 99 243 125 37 8 74 8 81 0 142.5-43t61.5-122q0-28-15-53t-33.5-42-58.5-37.5-66-32-80-32.5q-39-16-61.5-25t-61.5-26.5-62.5-31-56.5-35.5-53.5-42.5-43.5-49-35.5-58-21-66.5-8.5-78q0-138 98-242t255-134v-180q0-13 9.5-22.5t22.5-9.5h135q14 0 23 9t9 23v176q57 6 110.5 23t87 33.5 63.5 37.5 39 29 15 14q17 18 5 38l-81 146q-8 15-23 16-14 3-27-7-3-3-14.5-12t-39-26.5-58.5-32-74.5-26-85.5-11.5q-95 0-155 43t-60 111q0 26 8.5 48t29.5 41.5 39.5 33 56 31 60.5 27 70 27.5q53 20 81 31.5t76 35 75.5 42.5 62 50 53 63.5 31.5 76.5 13 94z">
                </path>
            </svg>
          </span>
                <p class="stock-title-text">
                    {{ stock.ticker }}
                </p>
                <p class="stock-percent">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1792 1792" fill="currentColor" height="20"
                         width="20">
                        <path d="M1408 1216q0 26-19 45t-45 19h-896q-26 0-45-19t-19-45 19-45l448-448q19-19 45-19t45 19l448 448q19 19 19 45z">
                        </path>
                    </svg>
                    {{ stock.change_percentage.replace('%', '') | float | int }}%
                </p>
            </div>
            <div class="stock-data">
                <p>
                    {{ price }}
                </p>
            </div>
        </div>
    {% endfor %}
</div>


<script src="{{ url_for('static', path='script.js') }}"></script>
</body>
</html>
